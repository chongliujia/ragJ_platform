# RAG 平台 - v0.3.0 第三期计划：产品可用化 & 体验优化

## 🎯 核心目标

本阶段的核心目标是将已跑通的RAG（检索增强生成）核心管线，从"技术原型"升级为"产品雏形"。我们将重点关注以下几个方面：

1.  **可用性**: 提供一个简单的Web界面来管理知识库，并对核心流程进行监控。
2.  **健壮性**: 提升系统的文档处理能力，支持更多常见格式。
3.  **精确性**: 优化检索和生成的效果，使用更先进的检索策略和模型。
4.  **规范性**: 建立标准化的部署和持续集成流程，为后续的快速迭代和团队协作打下基础。

---

## 🗺️ 功能与里程碑

我们将分六个主要模块来推进第三阶段的工作：

### 3.1 运营后台 (简单Web管理界面)
- **目标**: 提供一个基础的图形化界面来管理和监控知识库。
- **关键任务**:
    - [ ] **知识库管理**: 查看所有知识库列表。
    - [ ] **文档管理**: 在指定知识库中上传新文档、查看已上传文档列表、删除文档。
    - [ ] **状态监控**: 查看文档处理状态（等待中、处理中、成功、失败）。
    - [ ] **任务重试**: 为处理失败的文档提供一键重试功能。

### 3.2 多格式文档解析
- **目标**: 扩展文档处理能力，支持除`.txt`外的多种主流文档格式。
- **关键任务**:
    - [ ] **PDF解析**: 实现对`.pdf`文件的文本提取。
    - [ ] **Word文档解析**: 实现对`.docx`文件的文本提取。
    - [ ] **Markdown解析**: 实现对`.md`文件的解析。
    - [ ] **统一解析接口**: 创建一个能自动识别文件类型并调用相应解析器的服务。

### 3.3 检索效果升级
- **目标**: 提升从知识库中检索相关信息的能力，减少漏召回和错召回。
- **关键任务**:
    - [ ] **混合检索**: 结合向量检索（语义）和关键词检索（BM25/全文索引），提升对特定名词和术语的召回率。
    - [ ] **结果重排序 (Reranking)**: 使用轻量级的重排序模型，对初步检索出的Top-K结果进行二次排序，提高最终上下文的质量。

### 3.4 生成质量优化
- **目标**: 让最终生成的答案更准确、更有用。
- **关键任务**:
    - [ ] **Prompt模板配置化**: 将RAG流程中使用的Prompt模板从代码中剥离，做成可灵活配置的模板文件。
    - [ ] **答案溯源**: 在生成的答案中标明引用来源，例如"根据文档A第3段..."，提升答案的可信度。

### 3.5 部署与运维
- **目标**: 实现整个应用的一键部署和标准化环境管理。
- **关键任务**:
    - [ ] **Docker Compose**: 编写`docker-compose.yml`文件，实现对FastAPI后端、Milvus、PostgreSQL等所有依赖服务的一键启动和管理。
    - [ ] **环境变量规范化**: 提供一份完整的`.env.example`文件，清晰列出所有可配置的环境变量。

### 3.6 自动化测试 & CI
- **目标**: 建立持续集成（CI）流水线，保障代码质量。
- **关键任务**:
    - [ ] **单元测试**: 为核心的服务和工具函数编写单元测试，目标覆盖率 > 80%。
    - [ ] **集成测试**: 编写集成测试脚本，验证完整的API流程（创建知识库 -> 上传文档 -> RAG问答）。
    - [ ] **GitHub Actions**: 配置CI工作流，在代码提交时自动运行代码风格检查（linting）和所有测试。

---

## 🗓️ 预估时间线 (按周)

- **第 1 周**: 部署与运维 (3.5) + 运营后台雏形 (3.1部分)
- **第 2 周**: 多格式文档解析 (3.2)
- **第 3 周**: 检索效果升级 (3.3)
- **第 4 周**: 生成质量优化 (3.4) + 自动化测试 (3.6)
- **第 5 周**: 功能联调、Bug修复、文档完善，准备发布v0.3.0版本。 